-- [[ tri73637 - SMOOTH MOVEMENT V64 ]] --
local lp = game:GetService("Players").LocalPlayer
local pps = game:GetService("ProximityPromptService")

-- Tối ưu hóa: Giảm tần suất quét để không đè lệnh di chuyển
task.spawn(function()
    while task.wait(0.3) do -- 0.3s là khoảng cách vàng để không bị khựng
        local character = lp.Character
        local hrp = character and character:FindFirstChild("HumanoidRootPart")
        
        if hrp then
            -- Chỉ quét các Prompt đang hiển thị (tối ưu nhất của Roblox)
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ProximityPrompt") then
                    local parent = v.Parent
                    if parent and parent:IsA("BasePart") then
                        local dist = (hrp.Position - parent.Position).Magnitude
                        
                        -- Chỉ kích hoạt nếu trong tầm nhặt (22 studs)
                        if dist < 22 then
                            v.HoldDuration = 0
                            -- Dùng Task.spawn để việc nhặt đồ chạy riêng, không cản trở di chuyển
                            task.spawn(function()
                                fireproximityprompt(v)
                            end)
                        end
                    end
                end
            end
        end
    end
end)
